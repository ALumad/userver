<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    $navpath
    <li class="footer">$generatedby
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="$relpath^doxygen.png" alt="doxygen"/></a> $doxygenversion </li>
  </ul>
</div>
<!--END GENERATE_TREEVIEW-->
<!--BEGIN !GENERATE_TREEVIEW-->
<hr class="footer"/>
<a id='page_edit' style="float:left; padding-left: 7pt;" href="#">⚒ Редактировать страницу</a>
<address class="footer"><small>
$generatedby &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="$relpath^doxygen.png" alt="doxygen"/>
</a> $doxygenversion
</small></address>
<!--END !GENERATE_TREEVIEW-->

<script type="text/javascript">
var LOWER_CASE_TRANSLITTERATION_MAPPING = {
    "а":"a", "б":"b", "в":"v", "г":"g", "д":"d", "е":"e", "ё":"yo", "ж":"zh",
    "з":"z", "и":"i", "й":"i", "к":"k", "л":"l", "м":"m", "н":"n", "о":"o",
    "п":"p", "р":"r", "с":"s", "т":"t", "у":"u", "ф":"f", "х":"h", "ц":"ts",
    "ч":"ch", "ш":"sh", "щ":"sch", "ъ":"\'", "ы":"i", "ь":"\'", "э":"e",
    "ю":"yu", "я":"ya"
};

function make_id(raw_id) {
    return raw_id.toLowerCase().split('').map(function (char) {
        return LOWER_CASE_TRANSLITTERATION_MAPPING[char] || char;
    }).join('').replace(/\W/g, '');
}

function setup_page_edit() {
    href = window.location.href;
    indx = href.indexOf('md_ru_');
    if (indx === -1) {
        $('#page_edit').hide();
        return;
    }
    href = href.substring(indx).replace('.html', '');
    href = href.replace('md_ru_', 'https://wiki.yandex-team.ru/taxi/backend/');
    href = href.replaceAll('_', '/');
    $('#page_edit').attr("href", href + '/.edit');
}

function draw_toc() {
    headers = $(':header');
    if (headers.length === 0) {
        return;
    }

    sidenav_content = '<div id="mySidenav" class="sidenav">';
    sidenav_content += '<h2>Оглавление документа</h2>';
    headers.each(function() {
        index = parseInt(this.nodeName.substring(1)) - 1;
        id = $(this).attr('id');
        if (!id) {
          id = make_id($(this).text())
          $(this).attr('id', id);
        }
        sidenav_content += '<a href="#' + id + '" style="padding-left: ' + index * 10 + 'pt">' + $(this).text() +  '</a>';
    });
    sidenav_content += '</div>';

    $(sidenav_content).insertAfter('.header');
}

function highlight_code() {
    if (window.location.href.indexOf("hpp_source") !== -1) {
        // Header listing is already nicely highlighted by Doxygen
        return;
    }

    hljs.configure({
        tabReplace: '    ' // 4 spaces
    });
    hljs.registerAliases('py', {languageName: 'python'});
    hljs.registerAliases('sh', {languageName: 'shell'});
    hljs.registerAliases('bash', {languageName: 'shell'});
    hljs.registerAliases('yml', {languageName: 'yaml'});
    hljs.registerAliases('plain', {languageName: 'plaintext'});
    hljs.registerAliases('tskv', {languageName: 'plaintext'});
    $(".fragment").each(function() {
        node = $(this);
        data = '';
        language = '';

        node.children('div.line').each(function(i) {
            line = $(this).text();

            // Doxygen 1.8.11 workaround to remove line numbers.
            // No line numbers added in Doxygen 1.8.13
            line = line.replace(/^ *\d+\xA0/, '');

            if (i === 0 && hljs.getLanguage(line)) {
                language = line;
            } else {
                data += line + '\n';
            }
        });

        if (language !== '') {
            data = hljs.highlight(language, data).value;
        } else {
            data = hljs.highlightAuto(data).value;
        }
        node.replaceWith('<div class="fragment"><pre>' + data + '</pre></div>');
    });
}

$(function() {
    draw_toc();
    highlight_code();
    setup_page_edit();
});
</script>
</body>
</html>
