{
  "config_vars": "/etc/yandex/taxi/driver-authorizer/config_vars.json",
  "components_manager": {
    "coro_pool": {
      "initial_size": "$coro_pool_initial_size",
      "initial_size#fallback": 5000,
      "max_size": "$coro_pool_max_size",
      "max_size#fallback": 50000
    },
    "event_thread_pool": {
      "threads": "$event_threads",
      "threads#fallback": 2
    },
    "task_processors": [
      {
        "name": "main-task-processor",
        "worker_threads": "$main_worker_threads",
        "worker_threads#fallback": 8,
        "thread_name": "main-worker"
      },
      {
        "name": "mongo-task-processor",
        "worker_threads": "$mongo_worker_threads",
        "worker_threads#fallback": 5,
        "thread_name": "mongo-worker"
      }
    ],
    "default_task_processor": "main-task-processor",
    "components": [
      {
        "name": "logging",
        "loggers": {
          "default": {
            "file_path": "/var/log/yandex/taxi-driver-authorizer/server.log",
            "level": "$logger_level",
            "level#fallback": "info",
            "overflow_behavior": "block"
          },
          "access": {
            "file_path": "/var/log/yandex/taxi-driver-authorizer/access.log",
            "pattern": "[%Y-%m-%d %H:%M:%S.%f %z] %v"
          },
          "access-tskv": {
            "file_path": "/var/log/yandex/taxi-driver-authorizer/access_tskv.log",
            "pattern": "tskv\ttskv_format=taxi_driver_authorizer\ttimestamp=%Y-%m-%dT%H:%M:%S\ttimezone=%z%v"
          }
        }
      },
      {
        "name": "server",
        "listener": {
          "connection": {
            "in_buffer_size": 32768,
            "requests_queue_size_threshold": 100
          },
          "port": "$server_port",
          "port#fallback": 1180,
          "monitor_port": "$server_monitor_port",
          "monitor_port#fallback": 1188
        },
        "logger_access": "",
        "logger_access_tskv": "",
        "task_processor": "main-task-processor"
      },
      {
        "name": "redis-sentinel-thread-pool",
        "thread_name": "redis-sentinels",
        "threads": 1
      },
      {
        "name": "redis-thread-pool",
        "thread_name": "redis-client",
        "threads": "$redis_threads",
        "threads#fallback": 4
      },
      {
        "name": "secdist",
        "config": "/etc/yandex/taxi-secdist/taxi.json"
      },
      {
        "name": "redis",
        "thread_pool": "redis-thread-pool",
        "sentinel_thread_pool": "redis-sentinel-thread-pool",
        "task_processor": "main-task-processor",
        "groups": [
          {
            "db": "taximeter-base",
            "config_name": "$redis_taximeter_base",
            "config_name#fallback": "taximeter-base"
          }
        ]
      },
      {
        "name": "mongo-taxi",
        "task_processor": "mongo-task-processor",
        "dbalias": "taxi"
      },
      {
        "name": "taxi-config",
        "update_interval_ms": 5000,
        "full_update_interval_ms": 60000,
        "fallback_path": "/etc/yandex/taxi/driver-authorizer/taxi_config_fallback.json"
      },
      {
        "name": "http-server-settings"
      },
      {
        "name": "handler-server-monitor",
        "path": "/*",
        "task_processor": "main-task-processor"
      },
      {
        "name": "handler-ping",
        "path": "/ping",
        "task_processor": "main-task-processor"
      },
      {
        "name": "handler-driver-session",
        "path": "/driver_session",
        "task_processor": "main-task-processor",
        "session_ttl_update_enabled": "$session_ttl_update_enabled",
        "session_ttl_update_enabled#fallback": false,
        "parse_args_from_body": true
      }
    ]
  }
}
