# AUTOGENERATED, DON'T CHANGE THIS FILE!
{% set libraries_variable = libraries.variable|default('%s_LIBRARIES'|format(name)) %}
{% set includes_variable = includes.variable|default('%s_INCLUDE_DIRS'|format(name)) %}

{% if not virtual %}

include(FindPackageHandleStandardArgs)

{% if libraries.names|default(false) %}
find_library({{ libraries_variable }} NAMES 
  {{ libraries.names|join(' ') }}
{% if libraries['path-suffixes'] %}
    PATH_SUFFIXES
      {{ libraries['path-suffixes']|join(' ') }}
{% endif %} {# if libraries['path-suffixes'] #}
)
{% endif %} {# if libraries.names|default(false) #}

{% if includes.names|default(false) %}
find_path({{ includes_variable }} NAMES
  {{ includes.names|join(' ') }}
{% if includes['path-suffixes'] %}
    PATH_SUFFIXES
      {{ includes['path-suffixes']|join(' ') }}
{% endif %} {# if includes['path-suffixes'] #}
)
{% endif %} {# if includes.names|default(false) #}

{% if not libraries.names|default(false) and not includes.names|default(false) %}
find_package({{ package_name or name }} {{ version or '' }} QUIET)
{% endif %} {# if not libraries.names|default(false) and not includes.names|default(false) #}

find_package_handle_standard_args(
  {{ package_name or name }}
    REQUIRED_VARS
      {{ libraries_variable if libraries.enabled|default(true) else '' }}
      {{ includes_variable if includes.enabled|default(true) else '' }}
)
mark_as_advanced(
  {{ libraries_variable if libraries.enabled|default(true) else '' }}
  {{ includes_variable if includes.enabled|default(true) else '' }}
)

if(NOT {{ package_name or name }}_FOUND)
{% if fail_message %}
  message(FATAL_ERROR "{{ fail_message|trim }} {{ 'Version: {}'.format(version) if version else '' }}")
{% else %}
  message(FATAL_ERROR 
    "Could not find `{{ name }}` package."
{% if debian_names %}
    " Debian: sudo apt update && sudo apt install {{ ' '.join(debian_names) }}"
{% endif %} {# if debian_names #}
{% if formula_name %}
    " MacOS: brew install {{ formula_name }}"
{% endif %} {# if formula_name #}
{% if version %}
    " {{ 'Version: {}'.format(version) }}"
{% endif %} {# if version #}
  )
{% endif %} {# if fail_message #}
endif(NOT {{ package_name or name }}_FOUND)

{% endif %} {# if not virtual #}

if (NOT TARGET {{ name }})
  add_library({{ name }} INTERFACE IMPORTED)
{% if includes.enabled|default(true) %}
  target_include_directories({{ name }} INTERFACE {{ '${' }}{{ includes_variable }}{{ '}'}})
{% endif %} {# if includes.enabled|default(true) #}
{% if libraries.enabled|default(true) %}
  target_link_libraries({{ name }} INTERFACE {{ '${' }}{{ libraries_variable }}{{ '}'}})
{% endif %} {# if libraries.enabled|default(true) #}
{% if compile_definitions.names %}
  target_compile_definitions({{ name }} INTERFACE
{%- for option in compile_definitions.names %}  
    {{ option }}
{% endfor %} {# for option in compile_definitions.names #}
  )
{% endif %} {# if compile_definitions.names #}
endif(NOT TARGET {{ name }})
